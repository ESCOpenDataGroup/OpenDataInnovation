<!DOCTYPE html>
<html>
    <head>
        <title>London housing</title>
        <meta charset="utf-8">
        <!-- <script src="./script/papaparse.js" type="text/javascript"></script> -->
        <script src="./script/d3.js" type="text/javascript"></script>
        <script src="./script/maniplate_google_api.js" type="text/javascript"></script>
    </head>

    <body onload="read_london_borough_profile();">

        <h1>My First Google Map</h1>
        <div id="googleMap" style="width:100%;height:400px;"></div>
        <script>
            var map;
            function myMap() {
                map = new google.maps.Map(document.getElementById('googleMap'), {
                    zoom: 2,
                    center: new google.maps.LatLng(2.8,-187.3),
                    mapTypeId: 'terrain'
                    });

                    // Create a <script> tag and set the USGS URL as the source.
                    var script = document.createElement('script');
                    // This example uses a local copy of the GeoJSON stored at
                    // http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp
                    script.src = 'https://developers.google.com/maps/documentation/javascript/examples/json/earthquake_GeoJSONP.js';
                    document.getElementsByTagName('head')[0].appendChild(script);
                    map.data.setStyle(function(feature) {
                        var magnitude = feature.getProperty('mag');
                        return {
                            icon: getCircle(magnitude)
                        };
                        });
                }

                function getCircle(magnitude) {
                    return {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: 'red',
                    fillOpacity: .2,
                    scale: Math.pow(2, magnitude) / 2,
                    strokeColor: 'white',
                    strokeWeight: .5
                    };
                }

                function eqfeed_callback(results) {
                    map.data.addGeoJson(results);
                }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhsvElAvSQBRkbkHxZkYitf-KjeQ6Wnhg&callback=myMap"></script>


    </body>
</html>

